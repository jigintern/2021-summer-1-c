<h1>これはapiのテスト用ページです。使用しないでくださいbyもっく</h1>
ID:<input type =text id=num><br>
<button id=loca>location get</button>
<button id=info>infomation get</button>
<button id=add>add data</button>
<button id=get>get data</button>
<br>
<button id=icon>icon all</button>
<br>


<script type=module>
    import {fetchJSON} from "https://js.sabae.cc/fetchJSON.js";
    loca.onclick = async() => {
        const data=await fetchJSON("api/loca",num.value);
        console.log(data);
        alert(data);
    }
    info.onclick = async() => {
        const data=await fetchJSON("api/info",num.value);
        console.log(data);
        alert(data);
    }
    icon.onclick = async() => {
        const data=await fetchJSON("api/icon");
        console.log(data);
        alert(data);
    }
    add.onclick=async()=>{
        const data={"type":"icon","iconID":"none","lat":0,"lng":0};
        const item={"travelID":num.value,"data":data};
        const ret=await fetchJSON("/api/add",item);
        if(ret.match(/push ok/)){
            console.log("push ok");
            window.location.reload();
        }
    }
    get.onclick=asynce()=>{
        const travelID=num.value;
        const data=await fetchJSON("/api/get",travelID);
        console.log(data);
        alert(data);
    }
</script>